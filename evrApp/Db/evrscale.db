# Record set for an EVR's programable frequency divider
#
# Macros:
#  P = record name prefix
#  O = Object suffix
#  OBJ = devObj name
#  IDX = ID # corresponding to output mapping codes
#  MAX = Maximum division

record(longout, "$(P)$(O)") {
  field( DTYP, "Obj Prop uint32")
  field( DESC, "Prescaler $(IDX)")
  field( OUT , "@OBJ=$(OBJ), PROP=Divide")
  field( PINI, "YES")
  field( VAL , "2")
  field( HOPR, "$(MAX=0xffff)")
  field( LOPR, "2")
  field( DRVH, "$(MAX=0xffff)")
  field( DRVL, "2")
  field( FLNK, "$(P)$(O):rate")
  info(autosaveFields_pass0, "VAL")
}

record(calc, "$(P)$(O):rate") {
  field(INPA, "$(P)$(O)")
  field(INPB, "$(P)clock CP")
  field(CALC, "B/A")
  field(EGU, "MHz")
  field(PREC, "2")
}
