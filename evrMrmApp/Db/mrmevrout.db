
# Output mapping

record(longout, "$(P)$(O)src:set") {
  field( DTYP, "EVR Output")
  field( DESC, "Output $(IDX)")
  field( OUT , "#L$(C) A$(OT) C$(IDX) S0 @Map")
  field( FLNK, "$(P)$(O)src")
  field( PINI, "YES")
  field( VAL , "63")
}

# Settings
# Users use will set one of these at a time.

record(mbbo, "$(P)$(O)src:pulse:set") {
  field( DTYP, "Raw Soft Channel")
  field( OUT , "$(P)$(O)src:set PP")
  field( ZRST, "Pulser 0")
  field( ONST, "Pulser 1")
  field( TWST, "Pulser 2")
  field( THST, "Pulser 3")
  field( FRST, "Pulser 4")
  field( FVST, "Pulser 5")
  field( SXST, "Pulser 6")
  field( SVST, "Pulser 7")
  field( EIST, "Pulser 8")
  field( NIST, "Pulser 9")
  field( ZRVL, "0")
  field( ONVL, "1")
  field( TWVL, "2")
  field( THVL, "3")
  field( FRVL, "4")
  field( FVVL, "5")
  field( SXVL, "6")
  field( SVVL, "7")
  field( EIVL, "8")
  field( NIVL, "9")
}

record(mbbo, "$(P)$(O)src:dbus:set") {
  field( DTYP, "Raw Soft Channel")
  field( OUT , "$(P)$(O)src:set PP")
  field( ZRST, "DBus 0")
  field( ONST, "DBus 1")
  field( TWST, "DBus 2")
  field( THST, "DBus 3")
  field( FRST, "DBus 4")
  field( FVST, "DBus 5")
  field( SXST, "DBus 6")
  field( SVST, "DBus 7")
  field( ZRVL, "32")
  field( ONVL, "33")
  field( TWVL, "34")
  field( THVL, "35")
  field( FRVL, "36")
  field( FVVL, "37")
  field( SXVL, "38")
  field( SVVL, "39")
}

record(mbbo, "$(P)$(O)src:scale:set") {
  field( DTYP, "Raw Soft Channel")
  field( OUT , "$(P)$(O)src:set PP")
  field( ZRST, "Prescaler 0")
  field( ONST, "Prescaler 1")
  field( TWST, "Prescaler 2")
  field( ZRVL, "40")
  field( ONVL, "41")
  field( TWVL, "42")
}

record(mbbo, "$(P)$(O)src:force:set") {
  field( DTYP, "Raw Soft Channel")
  field( OUT , "$(P)$(O)src:set PP")
  field( ZRST, "Force Low")
  field( ONST, "Force High")
  field( ZRVL, "63")
  field( ONVL, "62")
}

# Mapping readback

record(longin, "$(P)$(O)src") {
  field( DTYP, "EVR Output")
  field( INP , "#L$(C) A$(OT) C$(IDX) S0 @Map")
  field( PINI, "YES")
  field( FLNK, "$(P)$(O)src:pulse")
}

record(mbbi, "$(P)$(O)src:pulse") {
  field( DTYP, "Raw Soft Channel")
  field( INP , "$(P)$(O)src")
  field( ZRST, "Pulser 0")
  field( ONST, "Pulser 1")
  field( TWST, "Pulser 2")
  field( THST, "Pulser 3")
  field( FRST, "Pulser 4")
  field( FVST, "Pulser 5")
  field( SXST, "Pulser 6")
  field( SVST, "Pulser 7")
  field( EIST, "Pulser 8")
  field( NIST, "Pulser 9")
  field( ZRVL, "0")
  field( ONVL, "1")
  field( TWVL, "2")
  field( THVL, "3")
  field( FRVL, "4")
  field( FVVL, "5")
  field( SXVL, "6")
  field( SVVL, "7")
  field( EIVL, "8")
  field( NIVL, "9")
  field( FLNK, "$(P)$(O)src:dbus")
}

record(mbbi, "$(P)$(O)src:dbus") {
  field( DTYP, "Raw Soft Channel")
  field( INP , "$(P)$(O)src")
  field( ZRST, "DBus 0")
  field( ONST, "DBus 1")
  field( TWST, "DBus 2")
  field( THST, "DBus 3")
  field( FRST, "DBus 4")
  field( FVST, "DBus 5")
  field( SXST, "DBus 6")
  field( SVST, "DBus 7")
  field( ZRVL, "32")
  field( ONVL, "33")
  field( TWVL, "34")
  field( THVL, "35")
  field( FRVL, "36")
  field( FVVL, "37")
  field( SXVL, "38")
  field( SVVL, "39")
  field( FLNK, "$(P)$(O)src:scale")
}

record(mbbi, "$(P)$(O)src:scale") {
  field( DTYP, "Raw Soft Channel")
  field( INP , "$(P)$(O)src")
  field( ZRST, "Prescaler 0")
  field( ONST, "Prescaler 1")
  field( TWST, "Prescaler 2")
  field( ZRVL, "40")
  field( ONVL, "41")
  field( TWVL, "42")
  field( FLNK, "$(P)$(O)src:force")
}

record(mbbi, "$(P)$(O)src:force") {
  field( DTYP, "Raw Soft Channel")
  field( INP , "$(P)$(O)src")
  field( ZRST, "Force Low")
  field( ONST, "Force High")
  field( ZRVL, "63")
  field( ONVL, "62")
}

# Select which is displayed


